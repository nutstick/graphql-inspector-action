{"version":3,"file":"input.js","sourceRoot":"","sources":["../../../src/diff/changes/input.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  GraphQLInputObjectType,\n  GraphQLInputField,\n  isNonNullType,\n} from 'graphql';\n\nimport {Change, CriticalityLevel, ChangeType} from './change';\nimport {safeChangeForInputValue} from '../../utils/graphql';\n\nexport function inputFieldRemoved(\n  input: GraphQLInputObjectType,\n  field: GraphQLInputField,\n): Change {\n  return {\n    criticality: {\n      level: CriticalityLevel.Breaking,\n      reason:\n        'Removing an input field will cause existing queries that use this input field to error.',\n    },\n    type: ChangeType.InputFieldRemoved,\n    message: `Input field '${field.name}' was removed from input object type '${\n      input.name\n    }'`,\n    path: [input.name, field.name].join('.'),\n  };\n}\n\nexport function inputFieldAdded(\n  input: GraphQLInputObjectType,\n  field: GraphQLInputField,\n): Change {\n  return {\n    criticality: isNonNullType(field.type)\n      ? {\n          level: CriticalityLevel.Breaking,\n          reason:\n            'Adding a possible type to Unions may break existing clients that were not programming defensively against a new possible type.',\n        }\n      : {\n          level: CriticalityLevel.Dangerous,\n        },\n    type: ChangeType.InputFieldAdded,\n    message: `Input field '${field.name}' was added to input object type '${\n      input.name\n    }'`,\n    path: [input.name, field.name].join('.'),\n  };\n}\n\nexport function inputFieldDescriptionAdded(\n  type: GraphQLInputObjectType,\n  field: GraphQLInputField,\n): Change {\n  return {\n    criticality: {\n      level: CriticalityLevel.NonBreaking,\n    },\n    type: ChangeType.InputFieldDescriptionAdded,\n    message: `Input field '${type.name}.${field.name}' has description '${\n      field.description\n    }'`,\n    path: [type.name, field.name].join('.'),\n  };\n}\n\nexport function inputFieldDescriptionRemoved(\n  type: GraphQLInputObjectType,\n  field: GraphQLInputField,\n): Change {\n  return {\n    criticality: {\n      level: CriticalityLevel.NonBreaking,\n    },\n    type: ChangeType.InputFieldDescriptionRemoved,\n    message: `Description was removed from input field '${type.name}.${\n      field.name\n    }'`,\n    path: [type.name, field.name].join('.'),\n  };\n}\n\nexport function inputFieldDescriptionChanged(\n  input: GraphQLInputObjectType,\n  oldField: GraphQLInputField,\n  newField: GraphQLInputField,\n): Change {\n  return {\n    criticality: {\n      level: CriticalityLevel.NonBreaking,\n    },\n    type: ChangeType.InputFieldDescriptionChanged,\n    message: `Input field '${input.name}.${\n      oldField.name\n    }' description changed from '${oldField.description}' to '${\n      newField.description\n    }'`,\n    path: [input.name, oldField.name].join('.'),\n  };\n}\n\nexport function inputFieldDefaultValueChanged(\n  input: GraphQLInputObjectType,\n  oldField: GraphQLInputField,\n  newField: GraphQLInputField,\n): Change {\n  return {\n    criticality: {\n      level: CriticalityLevel.Dangerous,\n      reason:\n        'Changing the default value for an argument may change the runtime behaviour of a field if it was never provided.',\n    },\n    type: ChangeType.InputFieldDefaultValueChanged,\n    message: `Input field '${input.name}.${\n      oldField.name\n    }' default value changed from '${oldField.defaultValue}' to '${\n      newField.defaultValue\n    }'`,\n    path: [input.name, oldField.name].join('.'),\n  };\n}\n\nexport function inputFieldTypeChanged(\n  input: GraphQLInputObjectType,\n  oldField: GraphQLInputField,\n  newField: GraphQLInputField,\n): Change {\n  return {\n    criticality: safeChangeForInputValue(oldField.type, newField.type)\n      ? {\n          level: CriticalityLevel.NonBreaking,\n          reason:\n            'Changing an input field from non-null to null is considered non-breaking.',\n        }\n      : {\n          level: CriticalityLevel.Breaking,\n          reason:\n            'Changing the type of an input field can cause existing queries that use this field to error.',\n        },\n    type: ChangeType.InputFieldTypeChanged,\n    message: `Input field '${input.name}.${\n      oldField.name\n    }' changed type from '${oldField.type.toString()}' to '${newField.type.toString()}'`,\n    path: [input.name, oldField.name].join('.'),\n  };\n}\n"]}